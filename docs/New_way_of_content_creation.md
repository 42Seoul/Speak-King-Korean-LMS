
# [요구사항 정의서] 한국어 학습용 음성 생성 웹 서비스

## 1. 프로젝트 개요
*   **프로젝트명**: 한국어 학습 문장 오디오 생성기 (NoMoreRecording)
*   **목적**: 한국어 학습자를 위해 텍스트를 입력받아 문장 단위로 분리하고, 번역 및 교정 과정을 거쳐 고품질의 AI 음성(TTS) 파일을 생성하여 제공함.
*   **주요 기술**: Node.js, Google Cloud TTS (Neural2/Gemini), JSZip

## 2. 시스템 구성 및 아키텍처
*   **Server**: Node.js (Express Framework)
*   **External APIs**:
    *   TTS: Google Cloud Text-to-Speech API
    *   Translation: MyMemory API, LibreTranslate API


## 3. 상세 기능 요구사항

### 3.1. 공통 기능 (Common Features)
| ID | 요구사항 명 | 상세 설명 |
| :--- | :--- | :--- |
| **REQ-C-01** | **서비스 선택** | 사용자는 콘텐츠 생성 방식으로 기존 방식과 새로운 'Google Cloud TTS' 를 사용하는 방식 중 하나를 선택할 수 있어야 한다. |
| **REQ-C-02** | **다중 문장 입력** | 사용자는 여러 줄의 텍스트를 입력창(Textarea)에 입력할 수 있어야 하며, 줄바꿈(`\n`)을 기준으로 문장이 분리되어야 함. |
| **REQ-C-03** | **병렬 처리** | 다수의 문장은 서버에서 병렬로 처리되어 처리 시간을 최소화해야 함  |
| **REQ-C-04** | **자동 번역** | 입력된 한국어 문장에 대해 영어 번역을 제공해야 함 (MyMemory → LibreTranslate 순으로 Fallback 처리). |
| **REQ-C-05** | **맞춤법 교정** | (현재 기능) 입력된 텍스트를 그대로 반환함. (추후 확장: 부산대 맞춤법 검사기 등의 로직 적용 가능해야 함). |
| **REQ-C-06** | **결과 표시** | 처리된 각 문장별로 [번호, 오디오 재생 버튼, 다운로드 버튼, 원문, 교정문, 번역문]을 카드 형태로 표시해야 함. |
| **REQ-C-07** | **개별 재생/다운로드** | 생성된 오디오를 브라우저에서 즉시 재생하거나 개별 MP3 파일로 다운로드할 수 있어야 함. |
| **REQ-C-08** | **일괄 다운로드 (ZIP)** | 생성된 모든 오디오 파일과 문장 정보가 담긴 텍스트 파일(`sentences.txt`)을 하나의 ZIP 파일로 압축하여 다운로드할 수 있어야 함. |

### 3.2. Google Cloud TTS 서비스 특화 기능
| ID | 요구사항 명 | 상세 설명 |
| :--- | :--- | :--- |
| **REQ-G-01** | **인증 방식 지원** | 서버는 `Service Account Key 파일`, `API Key`, `Gcloud Project ID` 등 다양한 구글 인증 방식을 지원해야 함. |
| **REQ-G-02** | **음성 그룹화** | 음성 목록을 `gemini-2.5-pro-tts`, `Chirp 3: HD`등으로 그룹화하여 UI에 표시해야 함. |
| **REQ-G-03** | **오디오 설정** | 다음 항목에 대한 설정이 가능해야 함.<br>- 오디오 포맷: MP3, WAV, OGG<br>- 말하기 속도: 0.25x ~ 2.0x
| **REQ-G-04** | **SSML 지원** | (일반 TTS 모드) 고급 사용자를 위해 SSML(Speech Synthesis Markup Language) 태그 입력을 활성화/비활성화할 수 있어야 함. |
| **REQ-G-05** | **Gemini 프롬프트** | (프롬프팅을 제공하는 모델 선택시) 자연어로 음성 스타일(예: "차분하고 진지한 톤으로")을 지시할 수 있는 프롬프트 입력창을 제공해야 함. |
| **REQ-G-06** | **음성 미리보기** | 선택한 음성과 설정값으로 짧은 미리보기 오디오를 생성하여 들어볼 수 있어야 함. |

## 4. 비기능 요구사항 (Non-Functional Requirements)

### 4.1. 성능 및 안정성
*   **NFR-01**: 서버는 다수의 문장 요청을 비동기 병렬 처리하여 응답 대기 시간을 최소화해야 함.
*   **NFR-02**: 외부 API (번역, TTS) 호출 실패 시, 서비스 전체가 중단되지 않고 해당 항목만 에러 처리되거나 대체 API(Fallback)를 사용해야 함.
*   **NFR-03**: 오디오 데이터는 Base64 인코딩된 문자열로 클라이언트에 전달되어야 함.

### 4.2. 보안
*   **NFR-04**: API Key (ElevenLabs, Google Cloud)는 서버 사이드(`.env`)에서만 관리되어야 하며, 클라이언트 코드에 노출되지 않아야 함.
*   **NFR-05**: CORS 정책을 적용하여 허용된 도메인에서의 요청만 처리해야 함.

### 4.3. 사용자 경험 (UI/UX)
*   **NFR-06**: 처리 진행률(Progress Bar)을 시각적으로 표시하여 사용자가 작업 상태를 인지할 수 있어야 함.
*   **NFR-07**: 로딩 중에는 스피너(Spinner)를 표시하고 버튼을 비활성화하여 중복 요청을 방지해야 함.
*   **NFR-08**: 반응형 웹 디자인을 적용하여 모바일 및 데스크톱 환경 모두 지원해야 함.
*   **NFR-09**: 특정 문장의 오디오만 선택 재시도 할 수 있으며, 직접 녹음할 수 있어야 함 
*   **NFR-10**: 특정 문장의 오디오만 선택 재시도 할 수 있으며, 직접 녹음할 수 있어야 함 


## 5. 데이터 인터페이스 요구사항
데이터 가공 형태는 기존의 DB 설정, 규칙을 따름

---
이 정의서는 코드 마이그레이션 및 기능 추가 시 기준 문서로 활용할 수 있습니다.